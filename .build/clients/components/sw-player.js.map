{"version":3,"names":["LitElement","html","css","live","throttle","SwPlayer","styles","constructor","player","_unobserve","updateVolume","volume","set","source","updateFilterSlider","filterSlider","connectedCallback","onUpdate","requestUpdate","disconnectedCallback","render","get","e","sawFreq","Number","target","value","getSchema","min","max","customElements","define"],"sources":["../../../src/clients/components/sw-player.js"],"sourcesContent":["// src/players/components/sw-player.js\nimport { LitElement, html, css } from 'lit';\nimport { live } from 'lit/directives/live.js';\nimport throttle from 'lodash/throttle.js'\n\n// import needed GUI components\nimport '@ircam/simple-components/sc-text.js';\nimport '@ircam/simple-components/sc-slider.js';\nimport '@ircam/simple-components/sc-toggle.js';\nimport '@ircam/simple-components/sc-bang.js';\n\nclass SwPlayer extends LitElement {\n  static styles = css`\n    :host {\n      display: block;\n      min-height: calc(100vh - 70px);\n    }\n\n    header {\n      display: block;\n      height: 70px;\n      line-height: 70px;\n      background-color: var(--sw-medium-background-color);\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: stretch;\n      border-bottom: 1px solid var(--sw-lighter-background-color);\n    }\n\n    p {\n      font-size: 30px;\n      margin: 15px;\n      height: 30px;\n      line-height: 30px;\n      text-indent: 8px;\n      background-color: #454545;\n    }\n\n    sc-select {\n      font-size: 30px;\n      height: 70px;\n      background-color: #454545;\n    }\n\n    :host > div {\n      display: flex;\n      background-color: #121212;\n      justify-content: space-between;\n      flex-direction: row;\n      min-height: calc(100vh - 70px);\n    }\n\n    sc-text {\n      font-size: 30px;\n      margin-top: 10px;\n      width: 100%;\n    }\n\n    sc-number {\n      margin-top: 10px;\n      font-size: 30px;\n      width: 100%;\n      height: 60px;\n    }\n\n    sc-slider {\n      margin-top: 10px;\n      width: 100%;\n    }\n\n    .filter {\n      width: 49%;\n    }\n\n    .filter > sc-slider {\n      height: calc(100vh - 300px);\n    }\n\n    .volume > sc-slider {\n      height: calc(100vh - 160px);\n    }\n\n    .volume {\n      width: 49%;\n    }\n\n  `;\n\n  constructor() {\n    super();\n    // stores the `player` state\n    this.player = null;\n    // stores the `unsubscribe` callback returned by the `state.onUpdate` methos\n    // https://soundworks.dev/soundworks/client.SharedState.html#onUpdate\n    this._unobserve = null;\n\n    const updateVolume = throttle(function (volume) {\n      this.player.set({ volume: volume }, { source: 'web'});\n    }, 100, { 'trailing' : true});\n\n    const updateFilterSlider = throttle(function (filterSlider) {\n      this.player.set({ filterSlider: filterSlider }, { source: 'web'});\n    }, 100, { 'trailing' : true});\n\n    this.updateVolume = updateVolume;\n    this.updateFilterSlider = updateFilterSlider;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    // update the component when a state change occurs\n    this._unobserve = this.player.onUpdate(() => this.requestUpdate());\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    // stop reacting to state change when the element is removed from the DOM\n    this._unobserve();\n  }\n\n  render() {\n    // create controls for the player state\n    return html`\n      <header>\n        <p>${this.player.get('id')}</p>\n        <sc-select\n          value=\"${this.player.get('sawFreq')}\"\n          .options=${this.player.get('selectFreq')}\n          @change=${e => this.player.set({ sawFreq: Number(e.target.value) }, { source:'web' })}\n        ></sc-select>\n      </header>\n      <div>\n        <div class=\"filter\">\n          <sc-number\n            .value=\"${this.player.get('filterFreq')}\"\n          ></sc-number>\n          <sc-number\n            .value=\"${this.player.get('numHarm')}\"\n          ></sc-number>\n          <sc-slider\n            relative\n            orientation=\"vertical\"\n            min=\"${this.player.getSchema().volume.min}\"\n            max=\"${this.player.getSchema().volume.max}\"\n            value=${this.player.get('volume')}\n            @input=${e => this.updateVolume(e.target.value)}\n          ></sc-slider>\n          <p>Volume</p>\n        </div>\n        <div class=\"volume\">\n          <sc-slider\n            relative\n            orientation=\"vertical\"\n            min=\"${this.player.getSchema().filterSlider.min}\"\n            max=\"${this.player.getSchema().filterSlider.max}\"\n            value=${this.player.get('filterSlider')}\n            @input=${e => this.updateFilterSlider(e.target.value)}\n          ></sc-slider>\n          <p>Filter</p>\n        </div>\n      </div>\n    `;\n  }\n}\n\n// register the component into the custom elements registry\ncustomElements.define('sw-player', SwPlayer);\n"],"mappings":"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"}
